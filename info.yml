# Copyright (c) 2014 Shotgun Software Inc.
# 
# CONFIDENTIAL AND PROPRIETARY
# 
# This work is provided "AS IS" and subject to the Shotgun Pipeline Toolkit 
# Source Code License included in this distribution package. See LICENSE.
# By accessing, using, copying or modifying this work you indicate your 
# agreement to the Shotgun Pipeline Toolkit Source Code License. All rights 
# not expressly granted therein are reserved by Shotgun Software Inc.

# Metadata defining the behaviour and requirements for this engine

# expected fields in the configuration file for this engine
configuration:

    menu_name:
        type: str
        description: One line description of this profile. This will appear on the menu in Flame.
        default_value: "Shotgun Shot Export"
                     
    task_template:
        type: str
        description: The Shotgun task template to assign to new shots created
        default_value: "Basic shot template"

    settings_hook:
        type: hook
        default_value: "{self}/settings.py"
        description: Contains logic to generate settings and presets for the flame export profile
                     used to generate the output. 
    
    shot_parent_entity_type:
        type: shotgun_entity_type
        default_value: Sequence
        description: The entity type which shots are parented to in the current setup.
        
    shot_parent_link_field:
        type: str
        default_value: sg_sequence
        description: The name of a single entity link field which links shot to a the parent entity
                     type defined in the shot_parent_entity setting
    
    shot_parent_task_template:
        type: str
        description: The Shotgun task template to assign to new shot parent entities
        default_value: ""
    
    plate_presets:
        type: list
        description: "A list of dictionaries in which you define the various export presets to 
                     appear on the profiles dropdown in the user interface. These presets are matched up
                     with export profiles defined inside the settings hook. The list of presets in this setting
                     basically defines the various profiles and their locations on disk, and the hook contains
                     all the details defining how the export should be written out to disk (resolution, bit 
                     depth, file format etc). The structure of this setting is a list of dictionaries. Each
                     dictionary item contains three keys: `name`, `publish_type` and `template`. The `name` 
                     parameter is the identifier for the preset - this name will appear in the dropdown in the UI.
                     It is also used to identify the preset inside the settings hook. The `publish_type` parameter
                     defines the publish type that should be associated with any exported plates when they reach 
                     Shotgun. Lastly, the `template` parameter defines where on disk the image sequence should be 
                     written out."
        allows_empty: False
        values:
            type: dict
            items:
                name:
                    type: str
                publish_type:
                    type: tank_type
                    description: The publish type for Flame plates  
                    default_value: "Flame Plate"                 
                template:
                    description: Toolkit file system template to control where video output goes on disk
                    type: template
                    fields: context, SEQ, Shot, version, segment_name, [YYYY], [MM], [DD], [hh], [mm], [ss], [width], [height], *
                    
    segment_clip_template:
        description: "Toolkit file system template to control where segment based clip files go on disk. 
                     A segment in flame is a 'block' on the timeline, so a shot may end up with multiple segments. 
                     This clip file contains flame related metadata that flame uses to deconstruct data as it is
                     being read back into the system." 
        type: template
        fields: context, Shot, segment_name, [YYYY], [MM], [DD], [hh], [mm], [ss], *

    shot_clip_template:
        description: Toolkit file system template to control where shot based clip files go on disk
                     
        type: template
        fields: context, Shot, [YYYY], [MM], [DD], [hh], [mm], [ss], *

    batch_template:
        description: Toolkit file system template to control where flame batch files go on disk
        type: template
        fields: context, Shot, version, [YYYY], [MM], [DD], [hh], [mm], [ss], *            
        
    batch_publish_type:
        type: tank_type
        description: The publish type for Flame batch scripts
        default_value: "Flame Batch File"
    
            

# this app works in all engines - it does not contain 
# any host application specific commands
supported_engines: 

# the Shotgun fields that this engine needs in order to operate correctly
requires_shotgun_fields:
        
# More verbose description of this item 
display_name: "Flame Shot Export"
description: "Export Flame sequences to Shotgun and the file system."

# Required minimum versions for this item to run
requires_shotgun_version:
requires_core_version: "v0.14.77"
requires_engine_version: "v1.2.0"

# the frameworks required to run this app
frameworks:

    
